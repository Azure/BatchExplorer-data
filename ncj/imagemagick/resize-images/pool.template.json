{
    "parameters":{
        "poolName":{
            "type":"string",
            "metadata":{
                "description":"Id of the pool"
            }
        },
        "numberNodes":{
            "type":"int",
            "defaultValue":1,
            "metadata":{
                "description":"The number of nodes in the Azure Batch pool where the job will run"
            }
        },
        "vmSize":{
            "type":"string",
            "metadata":{
                "description":"The size of the virtual machines that run the application"
            },
            "defaultValue":"Standard_D2_v2",
            "allowedValues":[
                "Standard_A1",
                "Standard_A2",
                "Standard_A3",
                "Standard_A4",
                "Standard_D1",
                "Standard_D2",
                "Standard_D3",
                "Standard_D4",
                "Standard_D1_v2",
                "Standard_D2_v2",
                "Standard_D3_v2",
                "Standard_D4_v2"
            ]
        }
    },
    "variables":{
        "osType":{
            "imageReference":{
                "publisher":"batch",
                "offer":"rendering-windows2016",
                "sku":"rendering",
                "version":"latest"
            },
            "nodeAgentSKUId":"batch.node.windows amd64"
        }
    },
    "pool":{
        "id":"[parameters('poolName')]",
        "displayName":"ImageMagick pool running: [parameters('poolName')]",
        "vmSize":"[parameters('vmSize')]",
        "virtualMachineConfiguration":"[variables('osType')]",
        "targetDedicatedNodes":"[parameters('numberNodes')]",
        "enableAutoScale":false
    }
}
